---
layout: post
title: "【设计模式】单一职责原则"
subtitle: 'Design Patterns - Single Responsibility Principle'
author: "Chi"
date: 2019-07-02 21:13
header-style: text
catalog: true
tags:
  - Design Patterns
---

## 定义

**单一职责**，英文 Single Responsibility Principle (SRP)：**应该有且只有一个原因引起类的变更**。

> There should never be more than one reason for a class to change.

进一步解释单一职责的定义，*有且只有一个原因引起类的变更*，指的是一个接口或一个类只有一个职责，它只负责一件事情。

## 示例

比如对于一个电话来说，他要实现的功能有：

- 拨号
- 通话
- 挂断

那么如果我们将这三个功能作为电话类的成员方法的话，是否符合单一职责原则呢？很显然不是。它包含了两个职责：协议管理（拨号、挂断），数据传送（通话）。

那么我们就应该根据这两个不同的职责，来为电话类设计两个不同的接口。如`IConnectionManager`负责协议管理，定义了拨号和挂断的方法；`IDataTransfer`负责数据传送，定义了通话的方法，然后我们的电话类`Phone`来实现这两个接口。

## 类的单一职责

此时我们的接口实现了单一原则，而`Phone`类并没有，但是在系统中，很多情况下是面向接口编程的，我们只公开接口，并不公开实现类。此外，实现类的单一职责需要综合考虑开发成本等，一味地遵循类的单一职责原则，会引起类间耦合过重，类的数量增加，人为地增加了设计地复杂性。

## 单一职责的好处

- 类的复杂性降低，实现的职责清晰明确
- 可读性提高
- 可维护性提高
- 对系统的变更引起的风险降低

## 方法的单一职责

方法的单一职责：**一个方法尽可能只做一件事**

比如需要一个**修改用户密码**的方法，虽然**修改用户密码**属于**修改用户信息**，但是绝不能用**修改用户信息**的方法来实现这个功能——这样的设计，方法职责不清晰，不单一。

要实现**修改用户密码**的功能，就定义**修改用户密码**的方法，要实现**修改用户名**的方法，就定义**修改用户名**的方法，这样每个方法职责非常清晰明确，开发简单，有利于日后进行维护。

不要有类似**修改用户信息**这样什么都能干的方法，这违背了方法的单一职责原则。

## 最佳实践

接口一定要做到单一职责，类的设计**尽量**做到只有一个原因引起变化。

## 参考

> 秦小波. 设计模式之禅（第2版）[M]. 机械工业出版社, 2014.
